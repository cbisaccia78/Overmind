{% extends 'base.html' %}
{% block content %}
<section class="page-head">
  <h2>Settings</h2>
  <p class="muted">Configure app-level credentials used by Overmind runs.</p>
</section>

<section class="card">
  <h3>OpenAI</h3>
  <p class="muted">
    Status:
    {% if openai_configured %}
      <span class="pill pill-good">Configured ({{ openai_masked }})</span>
    {% else %}
      <span class="pill pill-neutral">Not configured</span>
    {% endif %}
  </p>

  {% if settings_message %}
    <p class="pill pill-good">{{ settings_message }}</p>
  {% endif %}
  {% if settings_error %}
    <p class="error">{{ settings_error }}</p>
  {% endif %}

  <form method="post" action="/settings/openai" class="form-grid">
    <label>
      OpenAI API Key
      <input type="password" name="openai_api_key" placeholder="sk-..." autocomplete="off" />
    </label>
    <div class="hero-actions">
      <button class="primary" type="submit" name="action" value="save">Save Key</button>
      <button type="submit" name="action" value="test">Test Key</button>
      <button type="submit" name="action" value="clear">Remove Key</button>
    </div>
  </form>
</section>
{% endblock %}
